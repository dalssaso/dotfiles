#+TITLE: Doom Emacs Configuration
#+AUTHOR: Henrique Dalssaso
#+PROPERTY: header-args:emacs-lisp :tangle yes :results silent

This is my literate Doom Emacs configuration. It tangles to =config.el= automatically
when Doom loads (via the =literate= module).

* Machine Context

Load machine-specific variables generated by chezmoi.

#+begin_src emacs-lisp
;;; $DOOMDIR/config.el -*- lexical-binding: t; -*-

;; Load machine context (generated by chezmoi)
(let ((context-file (expand-file-name "~/.local/state/machine-context.el")))
  (when (file-exists-p context-file)
    (load context-file nil t)))
#+end_src

* Personal Info

#+begin_src emacs-lisp
(setq user-full-name "Henrique Dalssaso"
      user-mail-address (if (hd/work-machine-p)
                            hd/work-email
                          hd/personal-email))
#+end_src

* UI & Theme
** Fonts

Using Monaspace font family with Radon for italics.

#+begin_src emacs-lisp
(setq doom-font (font-spec :family "Monaspace Neon" :size 15)
      doom-variable-pitch-font (font-spec :family "SF Pro Text" :size 15)
      doom-symbol-font (font-spec :family "MesloLGS Nerd Font Mono")
      doom-big-font (font-spec :family "Monaspace Neon" :size 24))

(defun hd/monaspace-radon-italics-and-comments ()
  "Use Monaspace Radon for italic faces and comments."
  (let ((radon "Monaspace Radon")
        (neon "Monaspace Neon"))
    (set-face-attribute 'fixed-pitch nil :family neon)
    (set-face-attribute 'italic nil :family radon :slant 'italic)
    (set-face-attribute 'font-lock-comment-face nil :family radon :slant 'italic)
    (set-face-attribute 'font-lock-comment-delimiter-face nil :family radon :slant 'italic)
    (set-face-attribute 'font-lock-doc-face nil :family radon :slant 'italic)))

(add-hook 'doom-load-theme-hook #'hd/monaspace-radon-italics-and-comments)
#+end_src

** Theme

Catppuccin Mocha flavor.

#+begin_src emacs-lisp
(setq catppuccin-flavor 'mocha)
(setq doom-theme 'catppuccin)
#+end_src

** Line Numbers

#+begin_src emacs-lisp
(setq display-line-numbers-type t)
#+end_src

* Editor Settings
** Shell Configuration

#+begin_src emacs-lisp
(setq shell-file-name (executable-find "bash"))
(setq-default vterm-shell (executable-find "fish"))
(setq-default explicit-shell-file-name (executable-find "fish"))
#+end_src

** Treesitter

#+begin_src emacs-lisp
(after! treesit
  (setq treesit-font-lock-level 3))
#+end_src

** Projectile

#+begin_src emacs-lisp
(setq projectile-project-search-path '("~/src/work" "~/src/personal" "~/.local/share/chezmoi"))
#+end_src

** Auth Sources

#+begin_src emacs-lisp
(setq auth-sources '("~/.authinfo.gpg"))
#+end_src

* Packages
** Wakatime

#+begin_src emacs-lisp
(global-wakatime-mode)
#+end_src
